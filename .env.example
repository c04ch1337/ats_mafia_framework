# ============================================================================
# ATS MAFIA FRAMEWORK - COMPREHENSIVE ENVIRONMENT CONFIGURATION
# ============================================================================
# Copy this file to .env and configure your settings
# 
# This file contains ALL configuration variables for the entire framework,
# including core settings, features, integrations, and deployment options.
# ============================================================================
# ============================================================================
# DOCKER HOST CONFIGURATION (for network-accessible UI)
# ============================================================================
# Set this to your Docker host's IP address for UI served from :8501 to reach API on :8000
# Examples:
#   - Local machine: DOCKER_HOST_IP=192.168.1.100
#   - Server: DOCKER_HOST_IP=10.0.0.50
#   - Leave unset for container-to-container networking (default)
DOCKER_HOST_IP=


# ============================================================================
# FRAMEWORK CORE SETTINGS
# ============================================================================

# Environment: development, staging, production
FRAMEWORK_ENV=production

# Framework metadata
FRAMEWORK_NAME=ATS MAFIA Framework
FRAMEWORK_VERSION=1.0.0
FRAMEWORK_DESCRIPTION=Advanced Training System for Multi-Agent Interactive Framework

# Core operational settings
MAX_CONCURRENT_AGENTS=10
SESSION_TIMEOUT=3600
CHECKPOINT_INTERVAL=300
RECOVERY_ENABLED=true

# Python settings
PYTHONUNBUFFERED=1

# ============================================================================
# LOGGING CONFIGURATION
# ============================================================================

# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Log format
LOG_FORMAT=%(asctime)s - %(name)s - %(levelname)s - %(message)s

# Log file paths
LOG_FILE_PATH=logs/ats_mafia.log
MAX_FILE_SIZE=10MB
BACKUP_COUNT=5

# Audit logging
AUDIT_ENABLED=true
AUDIT_FILE_PATH=logs/audit.log

# Development/Debug settings
DEBUG=false
DEBUG_MODE=false
VERBOSE_LOGGING=false

# ============================================================================
# PROFILE MANAGEMENT
# ============================================================================

DEFAULT_PROFILE_PATH=profiles/
PROFILE_CACHE_ENABLED=true
PROFILE_CACHE_SIZE=100
PROFILE_VALIDATION_ENABLED=true
PROFILE_AUTO_RELOAD=false

# ============================================================================
# TOOL SYSTEM
# ============================================================================

# Enabled tools (comma-separated list, or empty for all)
ENABLED_TOOLS=

# Tool paths (comma-separated)
TOOL_PATHS=tools/

# Tool execution settings
TOOL_TIMEOUT=30
TOOL_MAX_MEMORY=512MB
TOOL_SANDBOX_ENABLED=true

# ============================================================================
# COMMUNICATION SETTINGS
# ============================================================================

# Communication protocol: websocket, http, grpc
COMMUNICATION_PROTOCOL=websocket
COMMUNICATION_HOST=localhost
COMMUNICATION_PORT=8080

# Security settings
SSL_ENABLED=false
MAX_CONNECTIONS=100
HEARTBEAT_INTERVAL=30
MESSAGE_QUEUE_SIZE=1000

# ============================================================================
# TRAINING ORCHESTRATOR
# ============================================================================

MAX_CONCURRENT_SESSIONS=5
ORCHESTRATOR_SESSION_TIMEOUT=7200
AUTO_SAVE_INTERVAL=600
SCENARIO_TIMEOUT=1800
PROGRESS_TRACKING=true

# ============================================================================
# USER INTERFACE (UI) SETTINGS
# ============================================================================

UI_ENABLED=true
UI_THEME=dark
UI_PORT=8501
UI_DEBUG=false
UI_AUTO_REFRESH=true

# ============================================================================
# API SERVER SETTINGS
# ============================================================================

API_ENABLED=true
API_HOST=localhost
API_PORT=5000
API_RATE_LIMIT=100
API_AUTHENTICATION_REQUIRED=false
API_CORS_ENABLED=true

# ============================================================================
# SECURITY SETTINGS
# ============================================================================

# Encryption
ENCRYPTION_ENABLED=true
ENCRYPTION_KEY_ROTATION=true
SESSION_ENCRYPTION=true

# Access control
AUDIT_LOGGING=true
ACCESS_CONTROL=false

# ============================================================================
# PERFORMANCE & MONITORING
# ============================================================================

# Monitoring
MONITORING_ENABLED=true
METRICS_COLLECTION=true
PROFILING_ENABLED=false

# Resource limits
MAX_CPU_PERCENT=80
MAX_MEMORY_PERCENT=85
MAX_DISK_USAGE=1GB

# ============================================================================
# DEVELOPMENT & TESTING
# ============================================================================

HOT_RELOAD=false
TEST_MODE=false
MOCK_SERVICES=false

# ============================================================================
# CONTAINER ORCHESTRATION
# ============================================================================

# Container pool settings
MAX_PARALLEL_STARTS=3
CONTAINER_STARTUP_TIMEOUT=120
CONTAINER_HEALTH_CHECK_TIMEOUT=30
CONTAINER_SHUTDOWN_GRACE_PERIOD=15
CONTAINER_RETRY_ATTEMPTS=3
CONTAINER_RETRY_DELAY_SECONDS=5

# Pool configurations
HOT_POOL_AUTO_START=true
HOT_POOL_AUTO_RESTART=true
HOT_POOL_HEALTH_CHECK_INTERVAL=60

WARM_POOL_TTL_SECONDS=1800
WARM_POOL_HEALTH_CHECK_INTERVAL=30
WARM_POOL_AUTO_STOP_IDLE=true

COLD_POOL_MAX_STARTUP_TIME=60
COLD_POOL_AUTO_STOP_AFTER_SECONDS=3600

# ============================================================================
# PERSONAL ASSISTANT FEATURE
# ============================================================================

# Enable/Disable Personal Assistant
PERSONAL_ASSISTANT_ENABLED=true

# Phone Provider: mock (testing), twilio (production), plivo (alternative)
PHONE_PROVIDER=mock

# Default Settings
PERSONAL_ASSISTANT_DEFAULT_PERSONA=professional_assistant
PERSONAL_ASSISTANT_AUTO_RECORD=true
PERSONAL_ASSISTANT_MAX_CALL_DURATION=10
PERSONAL_ASSISTANT_REQUIRE_APPROVAL_DEFAULT=true

# Advanced Personal Assistant Settings
PERSONAL_ASSISTANT_ENABLE_LEARNING=false
PERSONAL_ASSISTANT_ENABLE_ADAPTATION=true
PERSONAL_ASSISTANT_CONVERSATION_TIMEOUT=600

# ============================================================================
# TWILIO CONFIGURATION (if using Twilio as provider)
# ============================================================================
# Get these from: https://console.twilio.com

# TWILIO_ACCOUNT_SID=ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
# TWILIO_AUTH_TOKEN=your_auth_token_here
# TWILIO_PHONE_NUMBER=+1234567890

# ============================================================================
# PLIVO CONFIGURATION (if using Plivo as provider)
# ============================================================================
# Get these from: https://console.plivo.com

# PLIVO_AUTH_ID=MAxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
# PLIVO_AUTH_TOKEN=your_auth_token_here
# PLIVO_PHONE_NUMBER=+1234567890

# ============================================================================
# STORAGE PATHS
# ============================================================================

# Data storage paths (inside container or absolute paths)
RECORDING_PATH=/app/recordings/personal_assistant/
TRANSCRIPT_PATH=/app/transcripts/personal_assistant/
TASK_HISTORY_PATH=/app/data/personal_assistant/tasks/

# Framework data paths
DATA_PATH=/app/data/
PROFILES_PATH=/app/profiles/
SCENARIOS_PATH=/app/scenarios/
LOGS_PATH=/app/logs/

# ============================================================================
# RATE LIMITING
# ============================================================================

MAX_TASKS_PER_DAY=50
MAX_ACTIVE_TASKS=5

# ============================================================================
# NOTIFICATIONS
# ============================================================================

NOTIFY_ON_TASK_CREATED=false
NOTIFY_ON_TASK_AWAITING_APPROVAL=true
NOTIFY_ON_CALL_STARTED=true
NOTIFY_ON_CALL_COMPLETED=true
NOTIFY_ON_TASK_FAILED=true

# ============================================================================
# WEBHOOK CONFIGURATION
# ============================================================================

# Public URL where Twilio/Plivo can reach your webhook server
# For local development with ngrok: https://abc123.ngrok.io/voice/twiml
# For production: https://your-domain.com/voice/twiml
WEBHOOK_URL=http://localhost:5000/voice/twiml

# Webhook server settings
WEBHOOK_HOST=0.0.0.0
WEBHOOK_PORT=5000

# ============================================================================
# ETHICAL SAFEGUARDS
# ============================================================================

PERSONAL_ASSISTANT_ALWAYS_IDENTIFY=true
PERSONAL_ASSISTANT_DISCLOSE_AI=true
PERSONAL_ASSISTANT_NO_IMPERSONATION=true
PERSONAL_ASSISTANT_REQUIRE_APPROVAL_SENSITIVE=true

# ============================================================================
# VOICE SETTINGS
# ============================================================================

VOICE_ENABLED=false
VOICE_ENGINE=pyttsx3
VOICE_SPEECH_RECOGNITION_ENGINE=speechrecognition
VOICE_LANGUAGE=en-US
VOICE_RATE=200
VOICE_VOLUME=0.9

# ============================================================================
# DATABASE CONFIGURATION (Optional - if using external database)
# ============================================================================

# DATABASE_TYPE=postgresql
# DATABASE_HOST=localhost
# DATABASE_PORT=5432
# DATABASE_NAME=ats_mafia
# DATABASE_USER=ats_user
# DATABASE_PASSWORD=your_secure_password
# DATABASE_SSL_MODE=prefer

# ============================================================================
# REDIS CONFIGURATION (Optional - if using external Redis)
# ============================================================================

# REDIS_HOST=localhost
# REDIS_PORT=6379
# REDIS_PASSWORD=your_redis_password
# REDIS_DB=0
# REDIS_SSL=false

# ============================================================================
# LLM INTEGRATION (Optional - for AI-powered features)
# ============================================================================

# OpenAI Configuration
# OPENAI_API_KEY=sk-...
# OPENAI_MODEL=gpt-4
# OPENAI_MAX_TOKENS=2000
# OPENAI_TEMPERATURE=0.7

# Anthropic Configuration
# ANTHROPIC_API_KEY=sk-ant-...
# ANTHROPIC_MODEL=claude-3-opus-20240229
# ANTHROPIC_MAX_TOKENS=4096

# Local LLM Configuration
# LOCAL_LLM_ENABLED=false
# LOCAL_LLM_ENDPOINT=http://localhost:8000
# LOCAL_LLM_MODEL=llama2

# ============================================================================
# SANDBOX ENVIRONMENT
# ============================================================================

# Kali Linux sandbox settings
KALI_SANDBOX_ENABLED=true
KALI_SANDBOX_IMAGE=kalilinux/kali-rolling:latest
KALI_SANDBOX_NETWORK_ISOLATION=true

# Sandbox security
SANDBOX_SECURITY_MONITOR_ENABLED=true
SANDBOX_TOOL_WHITELIST_ENABLED=true

# ============================================================================
# NETWORK CONFIGURATION
# ============================================================================

# Network settings for Docker environments
NETWORK_DRIVER=bridge
NETWORK_SUBNET=172.20.0.0/16
NETWORK_GATEWAY=172.20.0.1

# ============================================================================
# ANALYTICS & REPORTING
# ============================================================================

# Analytics
ANALYTICS_ENABLED=true
ANALYTICS_RETENTION_DAYS=90

# Attack technique tracking
ATTACK_NAVIGATOR_ENABLED=true
TECHNIQUE_TRACKER_ENABLED=true

# Reporting
REPORTING_ENGINE_ENABLED=true
REPORT_FORMAT=html,pdf,json
REPORT_OUTPUT_PATH=/app/reports/

# ============================================================================
# COST TRACKING
# ============================================================================

COST_TRACKER_ENABLED=true
ADVANCED_COST_ANALYTICS_ENABLED=true

# ============================================================================
# DEPLOYMENT NOTES
# ============================================================================
# 
# 1. QUICK START:
#    - Copy this file to .env: cp .env.example .env
#    - Configure required settings (at minimum: FRAMEWORK_ENV, LOG_LEVEL)
#    - For Personal Assistant: Set PHONE_PROVIDER and uncomment provider section
#    - Run: docker-compose up -d
# 
# 2. PRODUCTION DEPLOYMENT:
#    - Set FRAMEWORK_ENV=production
#    - Configure security settings (encryption, authentication)
#    - Set proper WEBHOOK_URL for phone integration
#    - Configure database and Redis if using external instances
#    - Enable SSL/TLS where applicable
#    - Set appropriate resource limits
# 
# 3. DEVELOPMENT:
#    - Set FRAMEWORK_ENV=development
#    - Enable DEBUG=true and VERBOSE_LOGGING=true
#    - Use PHONE_PROVIDER=mock for testing
#    - Enable HOT_RELOAD=true for faster iteration
# 
# 4. SECURITY CONSIDERATIONS:
#    - Never commit .env files to version control
#    - Use strong passwords and API keys
#    - Rotate credentials regularly
#    - Enable encryption in production
#    - Review ethical safeguards before deployment
# 
# 5. PHONE INTEGRATION:
#    - For Twilio: Uncomment TWILIO_* variables and get credentials from console.twilio.com
#    - For Plivo: Uncomment PLIVO_* variables and get credentials from console.plivo.com
#    - Configure WEBHOOK_URL to match your public endpoint
#    - For local testing: Use ngrok to expose webhook server
# 
# 6. MONITORING:
#    - Check logs at: logs/ats_mafia.log and logs/audit.log
#    - Monitor resource usage through performance metrics
#    - Review analytics dashboard for training effectiveness
# 
# ============================================================================